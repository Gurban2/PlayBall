@echo off
chcp 65001 >nul
echo ========================================
echo üèê PlayBall - –ó–∞–ø—É—Å–∫ —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
echo ========================================

echo.
echo üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è...

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ Flutter
echo –ü—Ä–æ–≤–µ—Ä—è–µ–º Flutter...
flutter --version >nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ùå Flutter –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Flutter: https://flutter.dev/docs/get-started/install
    pause
    exit /b 1
)
echo ‚úÖ Flutter –Ω–∞–π–¥–µ–Ω

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ Chrome
echo –ü—Ä–æ–≤–µ—Ä—è–µ–º Chrome...
where chrome >nul 2>&1
if %errorlevel% neq 0 (
    where "C:\Program Files\Google\Chrome\Application\chrome.exe" >nul 2>&1
    if %errorlevel% neq 0 (
        echo ‚ùå Chrome –Ω–µ –Ω–∞–π–¥–µ–Ω!
        echo –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Google Chrome –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        pause
        exit /b 1
    )
)
echo ‚úÖ Chrome –Ω–∞–π–¥–µ–Ω

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
echo –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ...
ping -n 1 google.com >nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
    echo Firebase –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
) else (
    echo ‚úÖ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
)

echo.
echo üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞...

:: –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
echo –û—á–∏—â–∞–µ–º –∫—ç—à Flutter...
flutter clean >nul 2>&1

:: –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo –ü–æ–ª—É—á–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏...
flutter pub get
if %errorlevel% neq 0 (
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π!
    pause
    exit /b 1
)

echo.
echo üî• –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Firebase...

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
if not exist "lib\firebase_options.dart" (
    echo ‚ùå –§–∞–π–ª firebase_options.dart –Ω–µ –Ω–∞–π–¥–µ–Ω!
    echo –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É Firebase
    pause
    exit /b 1
)
echo ‚úÖ firebase_options.dart –Ω–∞–π–¥–µ–Ω

if not exist "web\index.html" (
    echo ‚ùå –§–∞–π–ª web\index.html –Ω–µ –Ω–∞–π–¥–µ–Ω!
    pause
    exit /b 1
)
echo ‚úÖ web\index.html –Ω–∞–π–¥–µ–Ω

echo.
echo üåê –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Firebase...
echo –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Firebase...

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Firebase
ping -n 1 firestore.googleapis.com >nul 2>&1
if %errorlevel% neq 0 (
    echo ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Firebase
    echo –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞
) else (
    echo ‚úÖ Firebase –¥–æ—Å—Ç—É–ø–µ–Ω
)

echo.
echo üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ...
echo.
echo –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8080
echo.
echo –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Firebase:
echo 1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
echo 2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Firebase"
echo 3. –í—ã–±–µ—Ä–∏—Ç–µ "–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"
echo.
echo –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ Ctrl+C
echo.

:: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
flutter run -d chrome --web-port=8080 --web-browser-flag="--disable-web-security"

echo.
echo üìä –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
echo.
echo –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å Firebase:
echo 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Firebase Console
echo 2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç volleyball-a7d8d —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
echo 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–µ–π
echo 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ deploy_firestore_rules.bat –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª
echo.
pause 