@echo off
chcp 65001 >nul
echo ========================================
echo üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π index.html
echo ========================================

echo.
echo –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏:
echo 1. –°—Ç–∞–±–∏–ª—å–Ω–∞—è (—Ç–µ–∫—É—â–∞—è) - Firebase v8, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
echo 2. –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è - Firebase v9, —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
echo 3. –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
echo 4. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
echo.

set /p choice="–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (1-4): "

if "%choice%"=="1" (
    echo.
    echo üìÅ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é...
    if exist "web\index_backup.html" (
        copy "web\index_backup.html" "web\index.html" >nul
        echo ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
    ) else (
        echo ‚ÑπÔ∏è –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
    )
) else if "%choice%"=="2" (
    echo.
    echo üìÅ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é...
    if not exist "web\index_backup.html" (
        copy "web\index.html" "web\index_backup.html" >nul
        echo üíæ –°–æ–∑–¥–∞–Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
    )
    copy "web\index_modern.html" "web\index.html" >nul
    echo ‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
    echo.
    echo ‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ: –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
) else if "%choice%"=="3" (
    echo.
    echo üìã –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏...
    findstr "firebase-app-compat" "web\index.html" >nul
    if %errorlevel% equ 0 (
        echo üÜï –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (Firebase v9)
    ) else (
        findstr "firebase-app.js" "web\index.html" >nul
        if %errorlevel% equ 0 (
            echo üîí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è (Firebase v8)
        ) else (
            echo ‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è
        )
    )
    
    findstr "loadEntrypoint" "web\index.html" >nul
    if %errorlevel% equ 0 (
        echo üì± Flutter: loadEntrypoint (—Å—Ç–∞–±–∏–ª—å–Ω—ã–π)
    ) else (
        echo üì± Flutter: load (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π)
    )
) else if "%choice%"=="4" (
    echo.
    echo üíæ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏...
    copy "web\index.html" "web\index_backup_%date:~-4,4%%date:~-10,2%%date:~-7,2%_%time:~0,2%%time:~3,2%.html" >nul
    echo ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞
) else (
    echo ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä
)

echo.
echo üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
echo - –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏
echo - –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è: –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
echo - –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
echo.
pause 