# üö´ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ WebChannel Firebase

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞:
```
[2025-05-26T15:15:20.677Z] @firebase/firestore: Firestore (11.7.0): 
WebChannelConnection RPC 'Write' stream 0x22098801 transport errored. 
Name: undefined Message: undefined
```

## üîç –ü—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏

1. **–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç–µ–≤—ã–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º** - –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å Firebase
2. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã WebChannel** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Firestore** - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∞–π–º–∞—É—Ç–æ–≤
4. **–ü—Ä–æ–±–ª–µ–º—ã —Å –±—Ä–∞—É–∑–µ—Ä–æ–º** - –∫—ç—à –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
5. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã Firebase SDK** - –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –≤–µ—Ä—Å–∏–∏

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```bash
fix_webchannel_errors.bat
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

#### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
- –ó–∞–∫—Ä–æ–π—Ç–µ –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

#### 2. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
```bash
flutter clean
flutter pub get
```

#### 3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞
- –ù–∞–∂–º–∏—Ç–µ `Ctrl+Shift+Delete`
- –í—ã–±–µ—Ä–∏—Ç–µ "–í—Å–µ –≤—Ä–µ–º—è"
- –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –∏ –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–æ–≤

#### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
```bash
flutter run -d chrome --web-port=8080 --web-browser-flag="--disable-web-security"
```

## üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ `lib/utils/firebase_test.dart`:

1. **–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫
2. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ç–∏** –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
3. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –æ—à–∏–±–æ–∫ WebChannel
4. **–§—É–Ω–∫—Ü–∏—è —Å–±—Ä–æ—Å–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞–ª–∏—Å—å:

#### 1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä
```bash
# Firefox
flutter run -d web-server --web-port=8080
# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080 –≤ Firefox

# Edge
flutter run -d edge --web-port=8080
```

#### 2. –û—Ç–∫–ª—é—á–∏—Ç–µ VPN/Proxy
- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ VPN
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –º–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç

#### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä
- –î–æ–±–∞–≤—å—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è Flutter
- –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ `firestore.googleapis.com`
- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å

#### 4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é Firebase
```bash
switch_index_version.bat
# –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç 2 (–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
```

#### 5. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ Firestore
```bash
deploy_firestore_rules.bat
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Firebase"
2. –ù–∞–∂–º–∏—Ç–µ **"–°–±—Ä–æ—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è"** (–Ω–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞)
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ **"–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
```
‚úÖ –°–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞
‚úÖ –ë–∞–∑–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –û–ø–µ—Ä–∞—Ü–∏–∏ Firestore —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### –û—Ç–∫—Ä–æ–π—Ç–µ F12 ‚Üí Console –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

#### ‚úÖ –•–æ—Ä–æ—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üî• Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ
üì° Firestore —Å–µ—Ç—å –≤–∫–ª—é—á–µ–Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
‚úÖ Firestore —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

#### ‚ùå –ü–ª–æ—Ö–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```
WebChannelConnection RPC 'Write' stream transport errored
UNAVAILABLE: The service is currently unavailable
Failed to get document because the client is offline
```

## üìã –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π WebChannel –≤ –∫–æ–Ω—Å–æ–ª–∏
- [ ] Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- [ ] –û–ø–µ—Ä–∞—Ü–∏–∏ Firestore —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è" –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

## üÜò –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å Firebase
- [Firebase Status](https://status.firebase.google.com/)
- –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Google

### 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç Firebase
- –í—Ä–µ–º–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
- –û–±–Ω–æ–≤–∏—Ç–µ `firebase_options.dart`

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä Firestore
```bash
firebase emulators:start --only firestore
```

### 4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∑–∞ –ø–æ–º–æ—â—å—é
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
- –û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –£–∫–∞–∂–∏—Ç–µ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ Flutter

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Firebase Troubleshooting](https://firebase.google.com/docs/web/troubleshooting)
- [Firestore Offline Support](https://firebase.google.com/docs/firestore/manage-data/enable-offline)
- [Chrome DevTools Network](https://developers.google.com/web/tools/chrome-devtools/network)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 26.05.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã 